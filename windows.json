{
  "variables": {
    "vsphere-server": "",
    "vsphere-user": "",
    "vsphere-password": "",
    "template-computer-name": "",
    "iso-store": ""
  },

  "builders": [
    {
      "type": "vsphere-iso",
      "ip_wait_timeout": "1h",
      "vcenter_server": "{{user `vsphere-server`}}",
      "insecure_connection": "true",
      "username": "{{user `vsphere-user`}}",
      "password": "{{user `vsphere-password`}}",
      "host": "localhost.localdomain",
      "datastore": "vmstore",
      "folder": "{{user `template-folder`}}",
      "communicator": "winrm",
      "winrm_username": "Administrator",
      "winrm_password": "S3cr3t0!",
      "vm_name":  "{{user `template-computer-name`}}",
      "convert_to_template": "true",
      "cpus": "2",
      "ram": "2048",
      "network": "VM Network",
      "network_card": "vmxnet3",
      "disk_controller_type":  "lsilogic-sas",
      "guest_os_type": "windows9Server64Guest",
      "disk_thin_provisioned": true,
      "disk_size": "32768",
      "iso_paths":[
        "{{user `iso-store`}}",
        "[isostore] ISOS/windows.iso"
        ],

    "floppy_files": [
      "autounattend.xml",
            "../scripts/disable-network-discovery.cmd",
            "../scripts/enable-rdp.cmd",
            "../scripts/enable-winrm.ps1",
            "../scripts/install-vm-tools.cmd",
            "../scripts/set-temp.ps1"
      ]    
    }
  ],

  "provisioners": [
    {
      "type": "windows-shell",
      "inline": ["ipconfig"]
    }
  ]
}
